import{m as o,p as j,q as R,f as c,a as T,b as t,u as C,Z as $,w as M,i as G,e as k,t as f,l as D,h as w,v as U,K as O,F as z,G as q,n as A,o as x}from"./app-EZ_mEjBi.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"flex h-screen w-full flex-col overflow-hidden bg-[#F8FAFC] dark:bg-[#0F172A] font-display text-text-main antialiased selection:bg-primary/20 selection:text-primary relative transition-colors duration-500"},Z={class:"relative z-20 flex h-16 w-full shrink-0 items-center justify-between border-b border-white/20 bg-white/70 dark:bg-[#0F172A]/70 backdrop-blur-xl dark:border-white/10 px-6 transition-colors"},J={class:"flex items-center gap-4"},Q={class:"flex flex-col"},X={class:"flex items-center gap-2"},Y={class:"text-[10px] text-slate-500 dark:text-slate-400"},tt={class:"text-[9px] px-1.5 py-0.5 rounded-full bg-slate-100 dark:bg-white/10 text-slate-500 dark:text-slate-300 font-bold uppercase"},et={class:"flex flex-1 overflow-hidden relative z-10"},at={class:"flex flex-1 flex-col overflow-y-auto bg-transparent"},lt={class:"mx-auto w-full max-w-4xl px-8 py-10 md:px-12 pb-40"},ot={class:"mb-10"},st={class:"min-h-[500px] w-full text-lg leading-relaxed text-slate-700 dark:text-slate-300 font-body"},it={class:"w-[320px] shrink-0 border-l border-white/20 bg-white/40 dark:bg-[#0F172A]/40 backdrop-blur-md dark:border-white/5 overflow-y-auto hidden lg:block transition-all"},nt={class:"flex flex-col gap-8 p-6"},rt={class:"flex flex-col gap-3"},dt={class:"relative"},ut=["value"],ct={class:"mt-auto pt-8"},xt={class:"flex flex-col gap-4"},pt={class:"flex w-full overflow-hidden rounded-full bg-slate-200 dark:bg-black/20 p-1"},vt=["disabled"],bt={key:0,class:"material-symbols-outlined animate-spin text-[20px]"},gt={key:1,class:"material-symbols-outlined"},ft={__name:"Editor",props:{note:Object},setup(B){var _,S,F,N,I,E;const i=B,h=o(((_=i.note)==null?void 0:_.id)||null),r=o(((S=i.note)==null?void 0:S.title)||""),p=o(((F=i.note)==null?void 0:F.content)||""),n=o(((N=i.note)==null?void 0:N.notebook_id)||null),v=o(((I=i.note)==null?void 0:I.status)||"DRAFT"),m=o(((E=i.note)==null?void 0:E.slug)||null),b=o([]),d=o(!1),s=o("Saved"),H=async()=>{try{const l=await window.axios.get("/api/v1/admin/notebooks");b.value=l.data.data,!n.value&&b.value.length>0&&(n.value=b.value[0].id)}catch(l){console.error("Error fetching notebooks:",l)}};let y=null;const L=()=>{s.value="Saving...",clearTimeout(y),y=setTimeout(()=>{u("DRAFT",!0)},2e3)};j([r,p,n],()=>{s.value="Unsaved Changes",L()});const u=async(l,e=!1)=>{d.value=!0,e&&(s.value="Saving...");try{const a={title:r.value,content:p.value,notebook_id:n.value,status:l};let g;h.value?g=await window.axios.put(`/api/v1/admin/notes/${h.value}`,a):(g=await window.axios.post("/api/v1/admin/notes",a),h.value=g.data.data.id),v.value=l,m.value=g.data.data.slug,s.value="Saved",e||alert("Note published successfully!")}catch(a){console.error("Error saving note:",a),s.value="Error Saving",e||alert("Failed to save note.")}finally{d.value=!1}},P=async()=>{const l=v.value||"DRAFT";await u(l,!0),m.value?window.open(`/articles/${m.value}`,"_blank"):alert("Could not generate preview link.")};R(()=>{H()});const V=l=>{l.target.style.height="auto",l.target.style.height=l.target.scrollHeight+"px"};return(l,e)=>(x(),c(z,null,[T(C($),{title:"Editor"}),t("div",W,[e[14]||(e[14]=t("div",{class:"fixed inset-0 overflow-hidden pointer-events-none z-0"},[t("div",{class:"absolute top-0 left-1/4 w-[500px] h-[500px] bg-blue-500/10 dark:bg-blue-500/5 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-[80px] opacity-70 animate-[breathe_10s_infinite]"}),t("div",{class:"absolute top-0 right-1/4 w-[500px] h-[500px] bg-purple-500/10 dark:bg-purple-500/5 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-[80px] opacity-70 animate-[breathe_10s_infinite] delay-1000"}),t("div",{class:"absolute -bottom-32 left-1/3 w-[600px] h-[600px] bg-orange-500/10 dark:bg-orange-500/5 rounded-full mix-blend-multiply dark:mix-blend-screen filter blur-[100px] opacity-50 animate-[float_12s_ease-in-out_infinite] delay-2000"})],-1)),t("header",Z,[t("div",J,[T(C(G),{href:"/taraNote",class:"flex size-10 items-center justify-center rounded-full hover:bg-black/5 dark:hover:bg-white/10 transition-colors text-slate-700 dark:text-slate-200"},{default:M(()=>[...e[6]||(e[6]=[t("span",{class:"material-symbols-outlined"},"arrow_back",-1)])]),_:1}),t("div",Q,[e[7]||(e[7]=t("div",{class:"flex items-center gap-2"},[t("span",{class:"font-extrabold text-lg tracking-tight text-[#1a1a1a] dark:text-white"},[k(" taraNote"),t("span",{class:"text-emerald-500"},"."),k(" Editor ")])],-1)),t("div",X,[t("span",Y,f(r.value||"Untitled Post"),1),t("span",tt,f(s.value),1)])])]),t("div",{class:"flex items-center gap-4"},[t("button",{onClick:P,class:"flex items-center gap-2 rounded-full px-4 py-2 text-sm font-medium text-slate-700 hover:bg-black/5 dark:text-slate-200 dark:hover:bg-white/10 transition-colors"},[...e[8]||(e[8]=[t("span",{class:"material-symbols-outlined text-[20px] text-indigo-500"},"visibility",-1),t("span",null,"Preview",-1)])])])]),t("div",et,[t("main",at,[t("div",lt,[t("div",ot,[w(t("textarea",{"onUpdate:modelValue":e[0]||(e[0]=a=>r.value=a),class:"w-full resize-none overflow-hidden bg-transparent p-0 text-5xl md:text-6xl font-bold leading-tight text-slate-900 dark:text-white placeholder:text-slate-300 dark:placeholder:text-slate-600 focus:outline-none focus:ring-0 transition-colors",onInput:V,placeholder:"Enter a captivating title...",rows:"1"},null,544),[[U,r.value]])]),e[9]||(e[9]=D('<div class="sticky top-0 z-50 mb-8 flex flex-wrap items-center gap-2 p-2 rounded-2xl bg-white/60 dark:bg-[#0F172A]/60 backdrop-blur-md border border-white/20 dark:border-white/10 shadow-sm w-fit mx-auto transition-all" data-v-c948c2f8><button class="rounded-xl p-2 text-slate-600 dark:text-slate-300 hover:bg-indigo-50 dark:hover:bg-indigo-500/20 hover:text-indigo-600 dark:hover:text-indigo-400 transition-all" title="Bold" data-v-c948c2f8><span class="material-symbols-outlined text-[20px]" data-v-c948c2f8>format_bold</span></button><button class="rounded-xl p-2 text-slate-600 dark:text-slate-300 hover:bg-indigo-50 dark:hover:bg-indigo-500/20 hover:text-indigo-600 dark:hover:text-indigo-400 transition-all" title="Italic" data-v-c948c2f8><span class="material-symbols-outlined text-[20px]" data-v-c948c2f8>format_italic</span></button><div class="mx-2 h-4 w-px bg-slate-300 dark:bg-white/20" data-v-c948c2f8></div><button class="rounded-xl p-2 text-slate-600 dark:text-slate-300 hover:bg-indigo-50 dark:hover:bg-indigo-500/20 hover:text-indigo-600 dark:hover:text-indigo-400 transition-all" title="Heading 1" data-v-c948c2f8><span class="material-symbols-outlined text-[20px]" data-v-c948c2f8>title</span></button><button class="rounded-xl p-2 text-slate-600 dark:text-slate-300 hover:bg-indigo-50 dark:hover:bg-indigo-500/20 hover:text-indigo-600 dark:hover:text-indigo-400 transition-all" title="List" data-v-c948c2f8><span class="material-symbols-outlined text-[20px]" data-v-c948c2f8>format_list_bulleted</span></button></div>',1)),t("div",st,[w(t("textarea",{"onUpdate:modelValue":e[1]||(e[1]=a=>p.value=a),class:"w-full h-full min-h-[500px] bg-transparent border-none focus:ring-0 p-0 resize-none text-lg text-slate-700 dark:text-slate-300 placeholder:text-slate-400",placeholder:"Start writing your story here..."},null,512),[[U,p.value]])])])]),t("aside",it,[t("div",nt,[t("div",rt,[e[12]||(e[12]=t("label",{class:"text-xs font-bold uppercase tracking-wider text-slate-400 dark:text-slate-500"},"Notebook",-1)),t("div",dt,[w(t("select",{"onUpdate:modelValue":e[2]||(e[2]=a=>n.value=a),class:"w-full appearance-none rounded-xl border-none bg-white/50 dark:bg-black/20 p-3 pr-10 text-sm font-medium text-slate-700 dark:text-slate-200 shadow-sm ring-1 ring-black/5 dark:ring-white/10 focus:ring-2 focus:ring-indigo-500 outline-none transition-all"},[e[10]||(e[10]=t("option",{value:null,disabled:""},"Select Notebook",-1)),(x(!0),c(z,null,q(b.value,a=>(x(),c("option",{key:a.id,value:a.id},f(a.name),9,ut))),128))],512),[[O,n.value]]),e[11]||(e[11]=t("span",{class:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-slate-400"},[t("span",{class:"material-symbols-outlined"},"expand_more")],-1))])]),e[13]||(e[13]=D('<div class="flex flex-col gap-3" data-v-c948c2f8><label class="text-xs font-bold uppercase tracking-wider text-slate-400 dark:text-slate-500" data-v-c948c2f8>Cover Image</label><div class="group relative flex aspect-video w-full cursor-pointer flex-col items-center justify-center gap-2 rounded-2xl border-2 border-dashed border-slate-300 dark:border-slate-700 bg-white/30 dark:bg-white/5 transition-all hover:border-indigo-500 hover:bg-indigo-50/50 dark:hover:border-indigo-400 dark:hover:bg-indigo-500/10" data-v-c948c2f8><div class="flex size-10 items-center justify-center rounded-full bg-slate-100 dark:bg-white/10 text-slate-400 group-hover:bg-indigo-500 group-hover:text-white transition-colors" data-v-c948c2f8><span class="material-symbols-outlined text-[20px]" data-v-c948c2f8>cloud_upload</span></div><p class="text-xs font-medium text-slate-500 dark:text-slate-400 group-hover:text-indigo-500 transition-colors" data-v-c948c2f8>Click to upload</p></div></div>',1)),t("div",ct,[t("div",xt,[t("div",pt,[t("button",{onClick:e[3]||(e[3]=a=>u("DRAFT")),class:A([v.value==="DRAFT"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300","flex-1 rounded-full py-2 text-xs font-bold transition-all"])}," DRAFT ",2),t("button",{onClick:e[4]||(e[4]=a=>u("PUBLISHED")),class:A([v.value==="PUBLISHED"?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-white shadow-sm":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300","flex-1 rounded-full py-2 text-xs font-bold transition-all"])}," PUBLISH ",2)]),t("button",{onClick:e[5]||(e[5]=a=>u("PUBLISHED")),disabled:d.value,class:"relative overflow-hidden rounded-full py-4 px-8 text-base font-bold text-white shadow-lg shadow-orange-500/30 bg-gradient-to-r from-orange-400 to-orange-600 hover:from-orange-500 hover:to-orange-700 active:scale-[0.98] transition-all flex items-center justify-center gap-2 w-full disabled:opacity-70 disabled:cursor-not-allowed"},[d.value&&s.value!=="Saving..."?(x(),c("span",bt,"progress_activity")):(x(),c("span",gt,"publish")),k(" "+f(d.value&&s.value!=="Saving..."?"PUBLISHING...":"PUBLISH NOW"),1)],8,vt)])])])])])])],64))}},kt=K(ft,[["__scopeId","data-v-c948c2f8"]]);export{kt as default};

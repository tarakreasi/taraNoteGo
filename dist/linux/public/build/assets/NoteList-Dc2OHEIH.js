import{m,q as T,y as I,f as i,b as s,t as k,n as u,F as A,G as U,o as n,g as B,h as D,v as L,d,H as b}from"./app-EZ_mEjBi.js";const V={class:"w-[320px] flex flex-col bg-white/50 dark:bg-[#0b1121]/80 transition-all duration-300"},_={class:"h-16 flex items-center justify-between px-5 shrink-0"},K=["title"],z={class:"px-5 py-2 shrink-0"},F={class:"relative group"},R=["value"],j={class:"px-5 pb-3 flex gap-2 shrink-0 overflow-x-auto no-scrollbar py-2"},M={class:"flex-1 overflow-y-auto custom-scrollbar px-3 pb-3"},O={key:0,class:"flex justify-center items-center h-full"},H={key:1,class:"flex flex-col items-center justify-center h-full text-center px-4 opacity-60"},P={class:"mt-2 text-[11px] text-slate-400 flex flex-col gap-1"},Q={key:2,class:"space-y-1 py-1"},G=["onClick"],q={key:0,class:"mb-1"},J=["id"],Y=["onDblclick"],W={class:"flex items-center justify-between text-[11px] text-slate-400 font-medium h-5"},X={class:"flex items-center gap-2"},Z={class:"font-mono text-[10px] opacity-70"},tt={key:0,class:"size-1.5 rounded-full bg-orange-400",title:"Draft"},et={key:1,class:"size-1.5 rounded-full bg-indigo-400",title:"Published"},st={class:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity"},lt=["onClick"],ot=["onClick"],it=["onClick"],nt=["onClick"],at={key:2,class:"absolute right-2 top-full mt-1 w-56 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-slate-200 dark:border-white/10 p-3 z-50"},rt=["id"],ut={__name:"NoteList",props:{notes:{type:Array,default:()=>[]},selectedNoteId:{type:[Number,String],default:null},searchQuery:{type:String,default:""},filterStatus:{type:String,default:"ALL"},currentNotebookName:{type:String,default:"All Notes"},isLoading:{type:Boolean,default:!1}},emits:["update:searchQuery","update:filterStatus","select-note","create-page","rename-note","request-create-space","delete-note"],setup(a,{emit:C}){const h=C,g=m(null),r=m({id:null,type:null,value:"",originalValue:""}),c=m(null),N=l=>{c.value=l},S=()=>{c.value=null},$=l=>{h("delete-note",l),c.value=null},x=(l,t,e)=>{r.value={id:l,type:t,value:e,originalValue:e}},p=()=>{r.value={id:null,type:null,value:"",originalValue:""}},f=()=>{const{id:l,type:t,value:e,originalValue:o}=r.value;if(e===o){p();return}if(!e.trim()){alert("Value cannot be empty");return}h("rename-note",{id:l,type:t,value:e}),p()},E=l=>{if(!l)return"-";const t=new Date(l),o=Math.floor((new Date-t)/(1e3*60*60)),v=Math.floor(o/24);return o<1?"Just now":o<24?`${o}h ago`:v===1?"Yesterday":v<7?`${v}d ago`:new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric"})},y=l=>{(l.ctrlKey||l.metaKey)&&l.key==="k"&&(l.preventDefault(),g.value&&g.value.focus())};T(()=>{window.addEventListener("keydown",y)}),I(()=>{window.removeEventListener("keydown",y)});const w={mounted:l=>l.focus()};return(l,t)=>(n(),i("div",V,[s("div",_,[s("h2",{class:"font-sans font-bold text-[13px] text-slate-800 dark:text-slate-100 select-none truncate pr-2 uppercase tracking-wide opacity-80",title:a.currentNotebookName},k(a.currentNotebookName),9,K),s("button",{onClick:t[0]||(t[0]=e=>l.$emit("create-page")),class:"size-8 rounded-full bg-slate-900 dark:bg-white text-white dark:text-slate-900 flex items-center justify-center hover:bg-slate-700 dark:hover:bg-slate-200 transition-colors shadow-sm shrink-0",title:"Add Note"},[...t[11]||(t[11]=[s("span",{class:"material-symbols-outlined text-[20px]"},"add",-1)])])]),s("div",z,[s("div",F,[t[12]||(t[12]=s("span",{class:"absolute left-3 top-1/2 -translate-y-1/2 material-symbols-outlined text-slate-400 text-[18px] group-focus-within:text-indigo-500 transition-colors"},"search",-1)),s("input",{ref_key:"searchInput",ref:g,type:"text",name:"search_notes",id:"search_notes","aria-label":"Search notes",value:a.searchQuery,onInput:t[1]||(t[1]=e=>l.$emit("update:searchQuery",e.target.value)),placeholder:"Search...",class:"w-full h-10 bg-slate-100 dark:bg-white/5 border-none rounded-lg pl-9 pr-14 text-sm focus:ring-1 focus:ring-indigo-500 transition-all placeholder:text-slate-400 text-slate-700 dark:text-slate-200"},null,40,R),t[13]||(t[13]=s("div",{class:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none flex items-center opacity-60"},[s("kbd",{class:"hidden sm:inline-block border border-slate-200 dark:border-white/10 rounded px-1.5 py-0.5 text-[10px] font-bold text-slate-400 font-mono bg-white dark:bg-white/5"},"âŒ˜K")],-1))])]),s("div",j,[s("button",{onClick:t[2]||(t[2]=e=>l.$emit("update:filterStatus","ALL")),class:u(["px-3 py-1 rounded-full text-[11px] font-semibold tracking-wide whitespace-nowrap transition-all border border-transparent",a.filterStatus==="ALL"?"bg-slate-200 dark:bg-white/10 text-slate-900 dark:text-white":"text-slate-500 hover:bg-slate-100 dark:hover:bg-white/5"])},"All",2),s("button",{onClick:t[3]||(t[3]=e=>l.$emit("update:filterStatus","DRAFT")),class:u(["px-3 py-1 rounded-full text-[11px] font-semibold tracking-wide whitespace-nowrap transition-all border border-transparent",a.filterStatus==="DRAFT"?"bg-orange-50 dark:bg-orange-500/10 text-orange-600 dark:text-orange-400":"text-slate-500 hover:bg-slate-100 dark:hover:bg-white/5"])},"Draft",2),s("button",{onClick:t[4]||(t[4]=e=>l.$emit("update:filterStatus","PUBLISHED")),class:u(["px-3 py-1 rounded-full text-[11px] font-semibold tracking-wide whitespace-nowrap transition-all border border-transparent",a.filterStatus==="PUBLISHED"?"bg-indigo-50 dark:bg-indigo-500/10 text-indigo-600 dark:text-indigo-400":"text-slate-500 hover:bg-slate-100 dark:hover:bg-white/5"])},"Published",2)]),s("div",M,[a.isLoading?(n(),i("div",O,[...t[14]||(t[14]=[s("span",{class:"material-symbols-outlined animate-spin text-2xl text-slate-300"},"progress_activity",-1)])])):a.notes.length===0?(n(),i("div",H,[t[15]||(t[15]=s("span",{class:"material-symbols-outlined text-4xl mb-3 text-slate-300"},"edit_note",-1)),t[16]||(t[16]=s("p",{class:"text-xs font-medium text-slate-500"},"No notes found",-1)),s("div",P,[s("button",{onClick:t[5]||(t[5]=e=>l.$emit("create-page")),class:"text-slate-600 hover:underline font-medium"},"Create new")])])):(n(),i("div",Q,[(n(!0),i(A,null,U(a.notes,e=>(n(),i("div",{key:e.id,onClick:o=>l.$emit("select-note",e),class:u(["group p-3 rounded-xl cursor-pointer transition-all duration-200 border border-transparent relative",a.selectedNoteId===e.id?"bg-white dark:bg-white/10 shadow-sm ring-1 ring-black/5 dark:ring-white/5 z-10":"hover:bg-white/60 dark:hover:bg-white/5"])},[r.value.id===e.id&&r.value.type==="NOTE_TITLE"?(n(),i("div",q,[D(s("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>r.value.value=o),name:"edit_title",id:"edit_title_"+e.id,onBlur:f,onKeydown:[b(f,["enter"]),b(p,["esc"])],onClick:t[7]||(t[7]=d(()=>{},["stop"])),type:"text",class:"w-full bg-white dark:bg-black/20 border-slate-300 text-sm px-2 py-1 rounded focus:ring-1 focus:ring-indigo-500 font-bold"},null,40,J),[[L,r.value.value],[w]])])):(n(),i("h3",{key:1,onDblclick:d(o=>x(e.id,"NOTE_TITLE",e.title),["stop"]),class:u(["font-medium text-[13px] text-slate-800 dark:text-slate-100 line-clamp-2 mb-1 leading-snug tracking-tight",a.selectedNoteId===e.id?"text-slate-900":"text-slate-700"]),title:"Double-click to rename"},k(e.title||"Untitled"),43,Y)),s("div",W,[s("div",X,[s("span",Z,k(E(e.updated_at)),1),e.status==="DRAFT"?(n(),i("span",tt)):(n(),i("span",et))]),s("div",st,[s("button",{onClick:d(o=>x(e.id,"NOTE_TITLE",e.title),["stop"]),class:"p-1 hover:bg-slate-200 dark:hover:bg-white/10 rounded text-slate-400 hover:text-indigo-500 transition-colors",title:"Rename"},[...t[17]||(t[17]=[s("span",{class:"material-symbols-outlined text-[14px]"},"edit",-1)])],8,lt),s("button",{onClick:d(o=>x(e.id,"NOTE_SLUG",e.slug),["stop"]),class:"p-1 hover:bg-slate-200 dark:hover:bg-white/10 rounded text-slate-400 hover:text-indigo-500 transition-colors",title:"Link slug"},[...t[18]||(t[18]=[s("span",{class:"material-symbols-outlined text-[14px]"},"link",-1)])],8,ot),c.value===e.id?(n(),i("div",{key:0,class:"flex items-center bg-white dark:bg-slate-800 shadow-sm rounded border border-slate-200 dark:border-white/10 overflow-hidden transform scale-110 origin-right transition-all",onClick:t[8]||(t[8]=d(()=>{},["stop"]))},[s("button",{onClick:d(o=>$(e.id),["stop"]),class:"px-1.5 py-0.5 text-[10px] font-bold text-white bg-red-500 hover:bg-red-600 transition-colors"},"DEL?",8,it),s("button",{onClick:d(S,["stop"]),class:"px-1 py-0.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 hover:bg-slate-100 dark:hover:bg-white/5 transition-colors"},[...t[19]||(t[19]=[s("span",{class:"material-symbols-outlined text-[14px] leading-none block"},"close",-1)])])])):(n(),i("button",{key:1,onClick:d(o=>N(e.id),["stop"]),class:"p-1 hover:bg-red-50 dark:hover:bg-red-500/10 rounded text-slate-400 hover:text-red-500 transition-colors",title:"Delete"},[...t[20]||(t[20]=[s("span",{class:"material-symbols-outlined text-[14px]"},"delete",-1)])],8,nt))])]),r.value.id===e.id&&r.value.type==="NOTE_SLUG"?(n(),i("div",at,[t[21]||(t[21]=s("label",{class:"block text-[10px] font-bold text-slate-400 uppercase mb-1"},"URL Slug",-1)),D(s("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>r.value.value=o),name:"edit_slug",id:"edit_slug_"+e.id,onKeydown:[b(f,["enter"]),b(p,["esc"])],onClick:t[10]||(t[10]=d(()=>{},["stop"])),type:"text",class:"w-full text-xs bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded px-2 py-1.5 focus:ring-1 focus:ring-indigo-500"},null,40,rt),[[L,r.value.value],[w]])])):B("",!0)],10,G))),128))]))])]))}};export{ut as default};

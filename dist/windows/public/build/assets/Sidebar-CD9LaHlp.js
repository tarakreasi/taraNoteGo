import{Q as q,k as H,m,f as a,b as t,n as k,g as p,r as Q,h as E,v as O,H as g,F as Y,G as J,t as f,D as P,N as W,o,d as c}from"./app-EZ_mEjBi.js";const X={class:"w-[260px] flex flex-col bg-slate-50/50 dark:bg-[#0b1121]/50 transition-all duration-300"},Z={class:"h-16 flex items-center px-4 gap-3 shrink-0"},ee={class:"flex-1 px-3 py-2 space-y-1 overflow-y-auto custom-scrollbar"},te={key:0,class:"px-2 mb-1"},se={class:"flex items-center gap-2 px-3 py-2 rounded-lg bg-white dark:bg-white/5 ring-1 ring-indigo-500/30 shadow-sm"},le={key:1,class:"px-4 py-2 text-xs text-slate-400"},ae=["onClick"],oe={key:0,class:"flex-1 min-w-0"},ne=["onDblclick"],ie={class:"hidden group-hover:flex items-center gap-1"},re=["onClick"],de=["onClick"],ue={class:"flex items-center gap-1.5"},ce=["onClick"],xe={key:3,class:"absolute left-0 bottom-full mb-2 w-60 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-slate-200 dark:border-white/10 p-3 z-50"},pe={key:4,class:"text-[10px] text-slate-400 shrink-0 font-mono"},ge={class:"p-3 border-t border-slate-200 dark:border-white/5 bg-slate-100/50 dark:bg-black/10"},ve={class:"flex items-center gap-3 p-2 rounded-lg hover:bg-slate-200 dark:hover:bg-white/5 transition-colors group"},be={class:"size-8 rounded-full bg-slate-300 dark:bg-slate-700 overflow-hidden shrink-0 border border-slate-100 dark:border-white/10"},me=["src"],ke={key:1,class:"w-full h-full flex items-center justify-center text-xs font-bold text-slate-500 dark:text-slate-400"},fe={class:"flex-1 min-w-0"},he={class:"text-sm font-medium text-slate-900 dark:text-slate-200 truncate"},we={class:"text-[10px] text-slate-500 dark:text-slate-400 truncate"},Se={__name:"Sidebar",props:{notebooks:{type:Array,default:()=>[]},selectedNotebookId:{type:[Number,String],default:null},viewMode:{type:String,default:"EDITOR"},notebooksLoading:{type:Boolean,default:!1}},emits:["update:viewMode","select-notebook","create-notebook","rename-notebook","delete-notebook"],setup(i,{expose:K,emit:L}){const j=q(),v=H(()=>{var l;return(l=j.props.auth)==null?void 0:l.user}),z=()=>{W.post(route("logout"))},r=L,y=m(!1),x=m(""),S=m(null),T=async()=>{y.value=!0,x.value="",await P(),S.value&&S.value.focus()},N=()=>{y.value=!1,x.value=""},D=()=>{if(!x.value.trim()){N();return}r("create-notebook",x.value),N()},n=m({id:null,type:null,value:"",originalValue:""}),I=(l,e,d)=>{n.value={id:l,type:e,value:d,originalValue:d}},h=()=>{n.value={id:null,type:null,value:"",originalValue:""}},C=()=>{const{id:l,type:e,value:d,originalValue:w}=n.value;if(d===w){h();return}if(!d.trim()){alert("Value cannot be empty");return}r("rename-notebook",{id:l,type:e,value:d}),h()},b=m(null),U=l=>{b.value=l},$=l=>{r("delete-notebook",l),b.value=null},A=l=>!l.notes_count||l.notes_count===0,_={mounted:l=>l.focus()},R=()=>{r("update:viewMode","SETTINGS"),r("select-notebook",null)},G=()=>{r("update:viewMode","EDITOR"),r("select-notebook",null)},F=l=>{r("update:viewMode","EDITOR"),r("select-notebook",l)};return K({startCreatingSpace:T}),(l,e)=>{var d,w,M,B,V;return o(),a("aside",X,[t("div",Z,[e[7]||(e[7]=t("div",{class:"size-8 rounded-lg bg-slate-900 dark:bg-white flex items-center justify-center text-white dark:text-slate-900 shadow-sm"},[t("span",{class:"material-symbols-outlined text-[20px]"},"dashboard")],-1)),e[8]||(e[8]=t("span",{class:"font-sans font-medium text-sm tracking-tight flex-1 text-slate-700 dark:text-slate-200"},"TaraNote",-1)),t("button",{onClick:R,class:k(["size-8 rounded-md hover:bg-slate-200 dark:hover:bg-white/10 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors flex items-center justify-center duration-200",i.viewMode==="SETTINGS"?"bg-slate-200 dark:bg-white/10 text-slate-900 dark:text-white":""]),title:"Settings"},[...e[6]||(e[6]=[t("span",{class:"material-symbols-outlined text-[18px]"},"settings",-1)])],2)]),t("nav",ee,[t("button",{onClick:G,class:k(["w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200 text-sm group text-left",i.viewMode==="EDITOR"&&i.selectedNotebookId===null?"bg-white dark:bg-white/10 text-slate-900 dark:text-white font-medium shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-white/60 dark:hover:bg-white/5 hover:text-slate-900 dark:hover:text-slate-200"])},[t("span",{class:k(["material-symbols-outlined text-[20px]",i.viewMode==="EDITOR"&&i.selectedNotebookId===null?"text-indigo-500 dark:text-indigo-400":"text-slate-400 group-hover:text-slate-500"])},"description",2),e[9]||(e[9]=t("span",{class:"flex-1"},"All Notes",-1)),Q(l.$slots,"count")],2),t("button",{onClick:T,class:"w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200 text-sm group text-left mt-1 text-slate-500 dark:text-slate-400 hover:bg-white/60 dark:hover:bg-white/5 hover:text-slate-900 dark:hover:text-slate-200"},[...e[10]||(e[10]=[t("span",{class:"material-symbols-outlined text-[20px] text-slate-400 group-hover:text-indigo-500 transition-colors"},"add_circle",-1),t("span",{class:"flex-1"},"New Space",-1)])]),e[14]||(e[14]=t("div",{class:"px-3 mt-8 mb-2 flex items-center justify-between group"},[t("span",{class:"text-[11px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider font-sans"},"Spaces")],-1)),y.value?(o(),a("div",te,[t("div",se,[e[11]||(e[11]=t("span",{class:"material-symbols-outlined text-[18px] text-indigo-500"},"folder_open",-1)),E(t("input",{ref_key:"newSpaceInput",ref:S,"onUpdate:modelValue":e[0]||(e[0]=s=>x.value=s),onKeydown:[g(D,["enter"]),g(N,["esc"])],onBlur:D,type:"text",class:"flex-1 bg-transparent border-none text-sm p-0 text-slate-900 dark:text-slate-200 placeholder-slate-400 focus:ring-0",placeholder:"Space name..."},null,544),[[O,x.value]])])])):p("",!0),i.notebooksLoading?(o(),a("div",le,"Loading...")):p("",!0),(o(!0),a(Y,null,J(i.notebooks,s=>(o(),a("div",{key:s.id,class:k(["w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200 text-sm group text-left relative",[n.value.id===s.id?"bg-white dark:bg-white/10 ring-1 ring-indigo-500":i.viewMode==="EDITOR"&&i.selectedNotebookId===s.id?"bg-white dark:bg-white/10 text-slate-900 dark:text-white font-medium shadow-sm":"text-slate-500 dark:text-slate-400 hover:bg-white/60 dark:hover:bg-white/5 hover:text-slate-700 dark:hover:text-slate-300"]]),onClick:u=>F(s.id)},[t("span",{class:k(["material-symbols-outlined text-[18px] shrink-0 transition-colors",i.selectedNotebookId===s.id?"text-indigo-500 dark:text-indigo-400":"text-slate-400 opacity-80 group-hover:text-slate-500"])},"folder",2),n.value.id===s.id&&n.value.type==="NOTEBOOK_NAME"?(o(),a("div",oe,[E(t("input",{"onUpdate:modelValue":e[1]||(e[1]=u=>n.value.value=u),onBlur:C,onKeydown:[g(C,["enter"]),g(h,["esc"])],onClick:e[2]||(e[2]=c(()=>{},["stop"])),type:"text",class:"w-full bg-transparent border-none text-sm px-0 py-0 focus:ring-0 p-0 text-slate-900 dark:text-white"},null,544),[[O,n.value.value],[_]])])):(o(),a("span",{key:1,onDblclick:c(u=>I(s.id,"NOTEBOOK_NAME",s.name),["stop"]),class:"flex-1 truncate select-none cursor-pointer",title:"Double-click to rename"},f(s.name),41,ne)),t("div",ie,[t("span",{onClick:c(u=>I(s.id,"NOTEBOOK_SLUG",s.slug),["stop"]),class:"material-symbols-outlined text-[14px] text-slate-300 hover:text-indigo-500 cursor-pointer transition-colors",title:"Edit Slug"},"link",8,re),A(s)&&b.value!==s.id?(o(),a("span",{key:0,onClick:c(u=>U(s.id),["stop"]),class:"material-symbols-outlined text-[14px] text-slate-300 hover:text-red-500 cursor-pointer transition-colors",title:"Delete Space"},"delete",8,de)):p("",!0)]),b.value===s.id?(o(),a("div",{key:2,class:"absolute inset-0 z-20 flex items-center justify-between bg-slate-50 dark:bg-slate-800 rounded-lg px-2 animate-in fade-in duration-200",onClick:e[4]||(e[4]=c(()=>{},["stop"]))},[e[12]||(e[12]=t("span",{class:"text-[11px] font-bold text-slate-500 uppercase tracking-wider"},"Delete?",-1)),t("div",ue,[t("button",{onClick:c(u=>$(s.id),["stop"]),class:"px-2 py-0.5 bg-red-500 hover:bg-red-600 text-white text-[10px] font-bold rounded shadow-sm uppercase tracking-wide transition-colors"},"Yes",8,ce),t("button",{onClick:e[3]||(e[3]=c(u=>b.value=null,["stop"])),class:"px-2 py-0.5 bg-white dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-600 text-[10px] font-bold rounded shadow-sm uppercase tracking-wide transition-colors"},"Cancel")])])):p("",!0),n.value.id===s.id&&n.value.type==="NOTEBOOK_SLUG"?(o(),a("div",xe,[e[13]||(e[13]=t("label",{class:"block text-[10px] font-bold text-slate-400 uppercase mb-2"},"Space Slug",-1)),E(t("input",{"onUpdate:modelValue":e[5]||(e[5]=u=>n.value.value=u),onKeydown:[g(C,["enter"]),g(h,["esc"])],type:"text",class:"w-full text-xs bg-slate-50 dark:bg-black/20 border border-slate-200 dark:border-white/10 rounded px-2 py-1.5 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500"},null,544),[[O,n.value.value],[_]])])):p("",!0),s.notes_count>0?(o(),a("span",pe,f(s.notes_count),1)):p("",!0)],10,ae))),128))]),t("div",ge,[t("div",ve,[t("div",be,[(d=v.value)!=null&&d.avatar?(o(),a("img",{key:0,src:v.value.avatar,class:"w-full h-full object-cover",alt:"User"},null,8,me)):(o(),a("div",ke,f(((M=(w=v.value)==null?void 0:w.name)==null?void 0:M.charAt(0))||"U"),1))]),t("div",fe,[t("div",he,f((B=v.value)==null?void 0:B.name),1),t("div",we,f((V=v.value)==null?void 0:V.email),1)]),t("button",{onClick:z,title:"Log Out",class:"size-8 flex items-center justify-center rounded-md hover:bg-white dark:hover:bg-white/10 text-slate-400 hover:text-red-500 transition-all shadow-sm opacity-0 group-hover:opacity-100 transform translate-x-2 group-hover:translate-x-0"},[...e[15]||(e[15]=[t("span",{class:"material-symbols-outlined text-[18px]"},"logout",-1)])])])])])}}};export{Se as default};
